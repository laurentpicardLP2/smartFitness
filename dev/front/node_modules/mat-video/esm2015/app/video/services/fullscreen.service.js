/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
export class FullscreenService {
    constructor() {
        this.fnMap = [
            // Object keys
            [
                'requestFullscreen',
                'exitFullscreen',
                'fullscreenElement',
                'fullscreenEnabled',
                'fullscreenchange',
                'fullscreenerror'
            ],
            // New WebKit
            [
                'webkitRequestFullscreen',
                'webkitExitFullscreen',
                'webkitFullscreenElement',
                'webkitFullscreenEnabled',
                'webkitfullscreenchange',
                'webkitfullscreenerror'
            ],
            // Old WebKit (Safari 5.1)
            [
                'webkitRequestFullScreen',
                'webkitCancelFullScreen',
                'webkitCurrentFullScreenElement',
                'webkitCancelFullScreen',
                'webkitfullscreenchange',
                'webkitfullscreenerror'
            ],
            // Mozilla
            [
                'mozRequestFullScreen',
                'mozCancelFullScreen',
                'mozFullScreenElement',
                'mozFullScreenEnabled',
                'mozfullscreenchange',
                'mozfullscreenerror'
            ],
            // MS
            [
                'msRequestFullscreen',
                'msExitFullscreen',
                'msFullscreenElement',
                'msFullscreenEnabled',
                'MSFullscreenChange',
                'MSFullscreenError'
            ]
        ];
        this.keyboardAllowed = typeof Element !== 'undefined' && 'ALLOW_KEYBOARD_INPUT' in Element;
        /** @type {?} */
        const ret = {};
        /** @type {?} */
        let val;
        for (let i = 0; i < this.fnMap.length; i++) {
            val = this.fnMap[i];
            if (val && val[1] in document) {
                for (i = 0; i < val.length; i++) {
                    // Map everything to the first list of keys
                    ret[this.fnMap[0][i].toString()] = val[i];
                }
                this.fn = ret;
            }
        }
    }
    /**
     * @param {?} elem
     * @return {?}
     */
    request(elem) {
        /** @type {?} */
        const request = this.fn.requestFullscreen;
        elem = elem || document.documentElement;
        // Work around Safari 5.1 bug: reports support for
        // keyboard in fullscreen even though it doesn't.
        // Browser sniffing, since the alternative with
        // setTimeout is even worse.
        if (/5\.1[.\d]* Safari/.test(navigator.userAgent)) {
            elem[request]();
        }
        else {
            elem[request](this.keyboardAllowed ? ((/** @type {?} */ (Element))).ALLOW_KEYBOARD_INPUT : {});
        }
    }
    /**
     * @return {?}
     */
    exit() {
        document[this.fn.exitFullscreen]();
    }
    /**
     * @param {?} elem
     * @return {?}
     */
    toggle(elem) {
        if (this.isFullscreen()) {
            this.exit();
        }
        else {
            this.request(elem);
        }
    }
    /**
     * @param {?} callback
     * @return {?}
     */
    onChange(callback) {
        document.addEventListener(this.fn.fullscreenchange, callback, false);
    }
    /**
     * @param {?} callback
     * @return {?}
     */
    onError(callback) {
        document.addEventListener(this.fn.fullscreenerror, callback, false);
    }
    /**
     * @return {?}
     */
    isFullscreen() {
        return Boolean(document[this.fn.fullscreenElement]);
    }
    /**
     * @return {?}
     */
    isEnabled() {
        // Coerce to boolean in case of old WebKit
        return Boolean(document[this.fn.fullscreenEnabled]);
    }
    /**
     * @return {?}
     */
    getElement() {
        return document[this.fn.fullscreenElement];
    }
}
FullscreenService.decorators = [
    { type: Injectable }
];
/** @nocollapse */
FullscreenService.ctorParameters = () => [];
if (false) {
    /** @type {?} */
    FullscreenService.prototype.fnMap;
    /** @type {?} */
    FullscreenService.prototype.fn;
    /** @type {?} */
    FullscreenService.prototype.keyboardAllowed;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnVsbHNjcmVlbi5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbWF0LXZpZGVvLyIsInNvdXJjZXMiOlsiYXBwL3ZpZGVvL3NlcnZpY2VzL2Z1bGxzY3JlZW4uc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUkzQyxNQUFNLE9BQU8saUJBQWlCO0lBdUQxQjtRQXJEUSxVQUFLLEdBQWU7WUFDeEIsY0FBYztZQUNkO2dCQUNJLG1CQUFtQjtnQkFDbkIsZ0JBQWdCO2dCQUNoQixtQkFBbUI7Z0JBQ25CLG1CQUFtQjtnQkFDbkIsa0JBQWtCO2dCQUNsQixpQkFBaUI7YUFDcEI7WUFDRCxhQUFhO1lBQ2I7Z0JBQ0kseUJBQXlCO2dCQUN6QixzQkFBc0I7Z0JBQ3RCLHlCQUF5QjtnQkFDekIseUJBQXlCO2dCQUN6Qix3QkFBd0I7Z0JBQ3hCLHVCQUF1QjthQUUxQjtZQUNELDBCQUEwQjtZQUMxQjtnQkFDSSx5QkFBeUI7Z0JBQ3pCLHdCQUF3QjtnQkFDeEIsZ0NBQWdDO2dCQUNoQyx3QkFBd0I7Z0JBQ3hCLHdCQUF3QjtnQkFDeEIsdUJBQXVCO2FBRTFCO1lBQ0QsVUFBVTtZQUNWO2dCQUNJLHNCQUFzQjtnQkFDdEIscUJBQXFCO2dCQUNyQixzQkFBc0I7Z0JBQ3RCLHNCQUFzQjtnQkFDdEIscUJBQXFCO2dCQUNyQixvQkFBb0I7YUFDdkI7WUFDRCxLQUFLO1lBQ0w7Z0JBQ0kscUJBQXFCO2dCQUNyQixrQkFBa0I7Z0JBQ2xCLHFCQUFxQjtnQkFDckIscUJBQXFCO2dCQUNyQixvQkFBb0I7Z0JBQ3BCLG1CQUFtQjthQUN0QjtTQUNKLENBQUM7UUFNRSxJQUFJLENBQUMsZUFBZSxHQUFHLE9BQU8sT0FBTyxLQUFLLFdBQVcsSUFBSSxzQkFBc0IsSUFBSSxPQUFPLENBQUM7O2NBQ3JGLEdBQUcsR0FBUSxFQUFFOztZQUNmLEdBQUc7UUFFUCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDeEMsR0FBRyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDcEIsSUFBSSxHQUFHLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLFFBQVEsRUFBRTtnQkFDM0IsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO29CQUM3QiwyQ0FBMkM7b0JBQzNDLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO2lCQUM3QztnQkFDRCxJQUFJLENBQUMsRUFBRSxHQUFHLEdBQUcsQ0FBQzthQUNqQjtTQUNKO0lBQ0wsQ0FBQzs7Ozs7SUFFTSxPQUFPLENBQUMsSUFBUzs7Y0FDZCxPQUFPLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxpQkFBaUI7UUFFekMsSUFBSSxHQUFHLElBQUksSUFBSSxRQUFRLENBQUMsZUFBZSxDQUFDO1FBRXhDLGtEQUFrRDtRQUNsRCxpREFBaUQ7UUFDakQsK0NBQStDO1FBQy9DLDRCQUE0QjtRQUM1QixJQUFJLG1CQUFtQixDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFDL0MsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7U0FDbkI7YUFBTTtZQUNILElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLG1CQUFBLE9BQU8sRUFBTyxDQUFDLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1NBQ3BGO0lBQ0wsQ0FBQzs7OztJQUVNLElBQUk7UUFDUCxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxjQUFjLENBQUMsRUFBRSxDQUFDO0lBQ3ZDLENBQUM7Ozs7O0lBRU0sTUFBTSxDQUFDLElBQVM7UUFDbkIsSUFBSSxJQUFJLENBQUMsWUFBWSxFQUFFLEVBQUU7WUFDckIsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1NBQ2Y7YUFBTTtZQUNILElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDdEI7SUFDTCxDQUFDOzs7OztJQUVNLFFBQVEsQ0FBQyxRQUFhO1FBQ3pCLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLGdCQUFnQixFQUFFLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUN6RSxDQUFDOzs7OztJQUVNLE9BQU8sQ0FBQyxRQUFhO1FBQ3hCLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLGVBQWUsRUFBRSxRQUFRLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDeEUsQ0FBQzs7OztJQUVNLFlBQVk7UUFDZixPQUFPLE9BQU8sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUM7SUFDeEQsQ0FBQzs7OztJQUVNLFNBQVM7UUFDWiwwQ0FBMEM7UUFDMUMsT0FBTyxPQUFPLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDO0lBQ3hELENBQUM7Ozs7SUFFTSxVQUFVO1FBQ2IsT0FBTyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0lBQy9DLENBQUM7OztZQXhISixVQUFVOzs7Ozs7SUFHUCxrQ0FnREU7O0lBRUYsK0JBQStCOztJQUMvQiw0Q0FBaUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEZ1bGxzY3JlZW5Db250cm9scyB9IGZyb20gJy4uL2ludGVyZmFjZXMvZnVsbHNjcmVlbi1jb250cm9scy5pbnRlcmZhY2UnO1xyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgRnVsbHNjcmVlblNlcnZpY2Uge1xyXG5cclxuICAgIHByaXZhdGUgZm5NYXA6IHN0cmluZ1tdW10gPSBbXHJcbiAgICAgICAgLy8gT2JqZWN0IGtleXNcclxuICAgICAgICBbXHJcbiAgICAgICAgICAgICdyZXF1ZXN0RnVsbHNjcmVlbicsXHJcbiAgICAgICAgICAgICdleGl0RnVsbHNjcmVlbicsXHJcbiAgICAgICAgICAgICdmdWxsc2NyZWVuRWxlbWVudCcsXHJcbiAgICAgICAgICAgICdmdWxsc2NyZWVuRW5hYmxlZCcsXHJcbiAgICAgICAgICAgICdmdWxsc2NyZWVuY2hhbmdlJyxcclxuICAgICAgICAgICAgJ2Z1bGxzY3JlZW5lcnJvcidcclxuICAgICAgICBdLFxyXG4gICAgICAgIC8vIE5ldyBXZWJLaXRcclxuICAgICAgICBbXHJcbiAgICAgICAgICAgICd3ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbicsXHJcbiAgICAgICAgICAgICd3ZWJraXRFeGl0RnVsbHNjcmVlbicsXHJcbiAgICAgICAgICAgICd3ZWJraXRGdWxsc2NyZWVuRWxlbWVudCcsXHJcbiAgICAgICAgICAgICd3ZWJraXRGdWxsc2NyZWVuRW5hYmxlZCcsXHJcbiAgICAgICAgICAgICd3ZWJraXRmdWxsc2NyZWVuY2hhbmdlJyxcclxuICAgICAgICAgICAgJ3dlYmtpdGZ1bGxzY3JlZW5lcnJvcidcclxuXHJcbiAgICAgICAgXSxcclxuICAgICAgICAvLyBPbGQgV2ViS2l0IChTYWZhcmkgNS4xKVxyXG4gICAgICAgIFtcclxuICAgICAgICAgICAgJ3dlYmtpdFJlcXVlc3RGdWxsU2NyZWVuJyxcclxuICAgICAgICAgICAgJ3dlYmtpdENhbmNlbEZ1bGxTY3JlZW4nLFxyXG4gICAgICAgICAgICAnd2Via2l0Q3VycmVudEZ1bGxTY3JlZW5FbGVtZW50JyxcclxuICAgICAgICAgICAgJ3dlYmtpdENhbmNlbEZ1bGxTY3JlZW4nLFxyXG4gICAgICAgICAgICAnd2Via2l0ZnVsbHNjcmVlbmNoYW5nZScsXHJcbiAgICAgICAgICAgICd3ZWJraXRmdWxsc2NyZWVuZXJyb3InXHJcblxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgLy8gTW96aWxsYVxyXG4gICAgICAgIFtcclxuICAgICAgICAgICAgJ21velJlcXVlc3RGdWxsU2NyZWVuJyxcclxuICAgICAgICAgICAgJ21vekNhbmNlbEZ1bGxTY3JlZW4nLFxyXG4gICAgICAgICAgICAnbW96RnVsbFNjcmVlbkVsZW1lbnQnLFxyXG4gICAgICAgICAgICAnbW96RnVsbFNjcmVlbkVuYWJsZWQnLFxyXG4gICAgICAgICAgICAnbW96ZnVsbHNjcmVlbmNoYW5nZScsXHJcbiAgICAgICAgICAgICdtb3pmdWxsc2NyZWVuZXJyb3InXHJcbiAgICAgICAgXSxcclxuICAgICAgICAvLyBNU1xyXG4gICAgICAgIFtcclxuICAgICAgICAgICAgJ21zUmVxdWVzdEZ1bGxzY3JlZW4nLFxyXG4gICAgICAgICAgICAnbXNFeGl0RnVsbHNjcmVlbicsXHJcbiAgICAgICAgICAgICdtc0Z1bGxzY3JlZW5FbGVtZW50JyxcclxuICAgICAgICAgICAgJ21zRnVsbHNjcmVlbkVuYWJsZWQnLFxyXG4gICAgICAgICAgICAnTVNGdWxsc2NyZWVuQ2hhbmdlJyxcclxuICAgICAgICAgICAgJ01TRnVsbHNjcmVlbkVycm9yJ1xyXG4gICAgICAgIF1cclxuICAgIF07XHJcblxyXG4gICAgcHJpdmF0ZSBmbjogRnVsbHNjcmVlbkNvbnRyb2xzO1xyXG4gICAgcHJpdmF0ZSBrZXlib2FyZEFsbG93ZWQ6IGJvb2xlYW47XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5rZXlib2FyZEFsbG93ZWQgPSB0eXBlb2YgRWxlbWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgJ0FMTE9XX0tFWUJPQVJEX0lOUFVUJyBpbiBFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IHJldDogYW55ID0ge307XHJcbiAgICAgICAgbGV0IHZhbDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZuTWFwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhbCA9IHRoaXMuZm5NYXBbaV07XHJcbiAgICAgICAgICAgIGlmICh2YWwgJiYgdmFsWzFdIGluIGRvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdmFsLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTWFwIGV2ZXJ5dGhpbmcgdG8gdGhlIGZpcnN0IGxpc3Qgb2Yga2V5c1xyXG4gICAgICAgICAgICAgICAgICAgIHJldFt0aGlzLmZuTWFwWzBdW2ldLnRvU3RyaW5nKCldID0gdmFsW2ldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5mbiA9IHJldDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVxdWVzdChlbGVtOiBhbnkpIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5mbi5yZXF1ZXN0RnVsbHNjcmVlbjtcclxuXHJcbiAgICAgICAgZWxlbSA9IGVsZW0gfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xyXG5cclxuICAgICAgICAvLyBXb3JrIGFyb3VuZCBTYWZhcmkgNS4xIGJ1ZzogcmVwb3J0cyBzdXBwb3J0IGZvclxyXG4gICAgICAgIC8vIGtleWJvYXJkIGluIGZ1bGxzY3JlZW4gZXZlbiB0aG91Z2ggaXQgZG9lc24ndC5cclxuICAgICAgICAvLyBCcm93c2VyIHNuaWZmaW5nLCBzaW5jZSB0aGUgYWx0ZXJuYXRpdmUgd2l0aFxyXG4gICAgICAgIC8vIHNldFRpbWVvdXQgaXMgZXZlbiB3b3JzZS5cclxuICAgICAgICBpZiAoLzVcXC4xWy5cXGRdKiBTYWZhcmkvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcclxuICAgICAgICAgICAgZWxlbVtyZXF1ZXN0XSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGVsZW1bcmVxdWVzdF0odGhpcy5rZXlib2FyZEFsbG93ZWQgPyAoRWxlbWVudCBhcyBhbnkpLkFMTE9XX0tFWUJPQVJEX0lOUFVUIDoge30pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZXhpdCgpIHtcclxuICAgICAgICBkb2N1bWVudFt0aGlzLmZuLmV4aXRGdWxsc2NyZWVuXSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB0b2dnbGUoZWxlbTogYW55KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNGdWxsc2NyZWVuKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5leGl0KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0KGVsZW0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25DaGFuZ2UoY2FsbGJhY2s6IGFueSkge1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIodGhpcy5mbi5mdWxsc2NyZWVuY2hhbmdlLCBjYWxsYmFjaywgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvbkVycm9yKGNhbGxiYWNrOiBhbnkpIHtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKHRoaXMuZm4uZnVsbHNjcmVlbmVycm9yLCBjYWxsYmFjaywgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc0Z1bGxzY3JlZW4oKSB7XHJcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4oZG9jdW1lbnRbdGhpcy5mbi5mdWxsc2NyZWVuRWxlbWVudF0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc0VuYWJsZWQoKSB7XHJcbiAgICAgICAgLy8gQ29lcmNlIHRvIGJvb2xlYW4gaW4gY2FzZSBvZiBvbGQgV2ViS2l0XHJcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4oZG9jdW1lbnRbdGhpcy5mbi5mdWxsc2NyZWVuRW5hYmxlZF0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRFbGVtZW50KCkge1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudFt0aGlzLmZuLmZ1bGxzY3JlZW5FbGVtZW50XTtcclxuICAgIH1cclxuXHJcbn1cclxuIl19