<div fxFlex fxLayout fxLayoutAlign="center">
  <div class="pad">
    <form [formGroup]="facilityForm" >
        <div>
          <mat-form-field class="facility-full-width">
            <mat-label>Catégorie de l'équipement</mat-label>
            <mat-select required name="idFacilityCategory" [(value)]="nameFacilityCategory" formControlName="nameFacilityCategory" [(ngModel)]="nameFacilityCategory">
              <mat-option *ngFor="let facilityCategory of listFacilityCategories | async" value="{{facilityCategory.nameFacilityCategory}}">{{ facilityCategory.nameFacilityCategory }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div>
          <mat-form-field class="facility-full-width">
            <mat-label>Salle de l'équipement</mat-label>
            <mat-select required name="nameRoom" [(value)]="nameRoom" formControlName="nameRoom" [(ngModel)]="nameRoom">
              <mat-option *ngFor="let room of listRooms | async" value="{{room.nameRoom}}">{{ room.nameRoom }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div formGroupName="nameFacilityGroup">
        <mat-form-field class="facility-full-width">
            <input matInput placeholder="Nom de l'équipement" type="text" formControlName="nameFacility" [errorStateMatcher]="confirmValidParentMatcher" [(ngModel)]="nameFacility">
            <mat-error>
                {{errors.nameFacility}}
            </mat-error>
        </mat-form-field>

      </div>
      <div>
          <mat-form-field class="facility-full-width">
              <input matInput placeholder="Prix d'achat de l'équipement" type="number" formControlName="priceFacility" [(ngModel)]="priceFacility">
          </mat-form-field>
        </div>
        <div>
            <mat-form-field>
              <input matInput type="date" placeholder="date of Purchase" formControlName="dateOfPurchase" [(ngModel)]="dateOfPurchase">
              </mat-form-field>
          </div>
      <div>
        <mat-form-field class="facility-full-width">
            <input matInput placeholder="Tarif prestation (10')" type="number" formControlName="priceSeance" [(ngModel)]="priceSeance">
        </mat-form-field>
      </div>
      <div>
          <mat-form-field class="facility-full-width">
              <textarea matInput placeholder="Description de l'équipement" type="text" formControlName="descriptionFacility" [(ngModel)]="descriptionFacility"></textarea>
          </mat-form-field>

        </div>
      <div>
        <input type="file" id="userFile" (change)="onSelectFile($event)" #fileInput style="display: none">
        <mat-form-field class="facility-full-width">
          <input matInput formControlName="imageFacility" placeholder="Image à uploader" [(ngModel)]="imageFacility">
        </mat-form-field>
        <button mat-raised-button (click)="selectFile()">Selectionner</button>
      </div>

      <button mat-raised-button [disabled]="facilityForm.invalid" (click)="onUpdate()">Enregistrer les modifications</button>

      <div>
          <br>
          <img *ngIf="imageFacility!='' && imageFacility!='undefined' && !bChangeImage" class="img-facility" src="assets/images/facilities/{{ imageFacility }}" />
        </div>
        <div *ngIf="imageFacility!='' && imageFacility!='undefined' && bChangeImage">
            <br>
            Cliquez sur "modifier" pour procéder à l'upload de l'image.
          </div>
    </form>
  </div> 
</div>