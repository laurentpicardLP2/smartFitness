<div fxFlex fxLayout fxLayoutAlign="center">
    <div class="pad">
      <form [formGroup]="productRefForm">
        <div>
          <mat-form-field class="product-ref-full-width">
            <mat-label>Catégorie du produit</mat-label>
            <mat-select required name="idProductCategory" [(value)]="nameProductCategory" formControlName="nameProductCategory" [(ngModel)]="nameProductCategory">
              <mat-option *ngFor="let productCategory of listProductCategories | async" value="{{productCategory.nameProductCategory}}">{{ productCategory.nameProductCategory }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div> 
        <div>
          <mat-form-field class="product-ref-full-width">
            <input matInput placeholder="Nom du produit" type="text" formControlName="nameProductRef" [(ngModel)]="nameProductRef">
            <mat-error *ngIf="productRefForm.controls['nameProductRef'].hasError('nameProductRef') && productRefForm.value.nameProductRef">
              {{errors.nameProductRefSame}}
          </mat-error>
          <mat-error *ngIf="productRefForm.controls['nameProductRef'].hasError('required')">
              {{errors.nameProductRef}}
          </mat-error>
          </mat-form-field>
        </div>
        <div>
          <mat-form-field class="product-ref-full-width">
              <input matInput required placeholder="Prix du produit" type="number" formControlName="priceProductRef" [(ngModel)]="priceProductRef">
              <mat-error *ngIf="productRefForm.controls['priceProductRef'].hasError('required')">
                {{errors.priceProductRef}}
            </mat-error>
        </mat-form-field>
        </div>
        <div>
            <mat-form-field class="product-ref-full-width">
                <textarea matInput placeholder="Description du produit" type="text" formControlName="descriptionProductRef" [(ngModel)]="descriptionProductRef"></textarea>
            </mat-form-field>
    
          </div>
        <div>
          <input type="file" id="userFile" (change)="onSelectFile($event)" #fileInput style="display: none">
          <mat-form-field class="product-ref-full-width">
            <input matInput formControlName="imageProductRef" placeholder="Image à uploader" [(ngModel)]="imageProductRef">
          </mat-form-field>
          <button mat-raised-button (click)="selectFile()">Selectionner</button>
        </div>
  
        <button mat-raised-button [disabled]="productRefForm.invalid" (click)="onUpdate()">Enregistrer les modifications</button>
        <div>
          <br>
          <img *ngIf="imageProductRef!='' && imageProductRef!='undefined' &&  !bChangeImage" class="img-product" src="assets/images/facilities/{{ imageProductRef }}" />
        </div>
        <div *ngIf="imageProductRef!='' && imageProductRef!='undefined' && bChangeImage">
            <br>
            Cliquez sur "modifier" pour procéder à l'upload de l'image.
          </div>
      </form>
    </div> 
  </div>